# Azure Developer CLI configuration for Finelle UI
name: finelle-ui
metadata:
  template: finelle-react-containerapp@0.0.1-beta

# Infrastructure configuration
infra:
  provider: bicep
  path: infrastructure
  module: main

# Services configuration
services:
  ui:
    project: .
    dist: dist
    language: js
    host: containerapp
    docker:
      path: ./Dockerfile
      context: .

# Hooks for deployment lifecycle
hooks:
  predeploy:
    windows:
      shell: pwsh
      run: |
        echo "Starting pre-deployment checks..."
        echo "Building React application..."
        npm run build
    posix:
      shell: sh
      run: |
        echo "Starting pre-deployment checks..."
        echo "Building React application..."
        npm run build
  
  postdeploy:
    windows:
      shell: pwsh
      run: |
        echo "Deployment completed successfully!"
        echo "Application URL: $Env:AZURE_CONTAINER_APP_URL"
    posix:
      shell: sh
      run: |
        echo "Deployment completed successfully!"
        echo "Application URL: $AZURE_CONTAINER_APP_URL"
